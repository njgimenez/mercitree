{"ast":null,"code":"var _jsxFileName = \"/home/devdisnovo/Documentos/PROYECTOS/merci/client/src/components/PDFGenerator.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport { motion } from 'framer-motion';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PDFGenerator = ({\n  votos,\n  estadisticas,\n  treeRef\n}) => {\n  _s();\n  const [generating, setGenering] = React.useState(false);\n\n  // Utilidad: carga una imagen y devuelve el elemento HTMLImageElement\n  const loadImage = src => {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.crossOrigin = 'anonymous';\n      img.onload = () => resolve(img);\n      img.onerror = reject;\n      img.src = src;\n    });\n  };\n\n  // Utilidad: crea una imagen circular a partir de una fuente\n  const createCircularImageDataUrl = async (src, size) => {\n    const img = await loadImage(src);\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    canvas.width = size;\n    canvas.height = size;\n    if (!ctx) return '';\n    ctx.clearRect(0, 0, size, size);\n    ctx.save();\n    ctx.beginPath();\n    ctx.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.clip();\n\n    // Dibujar imagen ajustada al cuadrado\n    ctx.drawImage(img, 0, 0, size, size);\n    ctx.restore();\n    return canvas.toDataURL('image/png');\n  };\n  const generatePDF = async () => {\n    if (!treeRef.current) return;\n    setGenering(true);\n    try {\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const pageWidth = pdf.internal.pageSize.getWidth();\n      const pageHeight = pdf.internal.pageSize.getHeight();\n\n      // Configurar fuentes modernas\n      pdf.setFont('helvetica');\n\n      // Página 1: Portada con encabezado\n      pdf.setFillColor(248, 250, 252); // Fondo lavanda muy claro\n      pdf.rect(0, 0, pageWidth, pageHeight, 'F');\n\n      // Encabezado principal\n      pdf.setFontSize(24);\n      pdf.setTextColor(51, 51, 51);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text('Arbol de Predicciones - Un Recuerdo Especial', pageWidth / 2, 30, {\n        align: 'center'\n      });\n\n      // Capturar imagen del árbol\n      const treeCanvas = await html2canvas(treeRef.current, {\n        scale: 1.5,\n        useCORS: true,\n        allowTaint: true,\n        backgroundColor: '#ffffff',\n        logging: false,\n        width: treeRef.current.offsetWidth,\n        height: treeRef.current.offsetHeight\n      });\n      const treeImgData = treeCanvas.toDataURL('image/png');\n      const treeAspectRatio = treeCanvas.width / treeCanvas.height;\n      const treeWidth = pageWidth - 40;\n      const treeHeight = treeWidth / treeAspectRatio;\n\n      // Agregar imagen del árbol centrada\n      pdf.addImage(treeImgData, 'PNG', 20, 50, treeWidth, treeHeight);\n\n      // Fecha de generación\n      pdf.setFontSize(12);\n      pdf.setTextColor(153, 153, 153);\n      pdf.setFont('helvetica', 'normal');\n      const fecha = new Date().toLocaleDateString('es-ES', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n      pdf.text(`Generado el ${fecha}`, pageWidth / 2, pageHeight - 20, {\n        align: 'center'\n      });\n\n      // Página 2: Estadísticas en tarjetas modernas\n      pdf.addPage();\n      pdf.setFillColor(248, 250, 252);\n      pdf.rect(0, 0, pageWidth, pageHeight, 'F');\n\n      // Título de estadísticas\n      pdf.setFontSize(20);\n      pdf.setTextColor(51, 51, 51);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text('Estadisticas de las Predicciones', pageWidth / 2, 30, {\n        align: 'center'\n      });\n\n      // Dibujar tarjetas de estadísticas modernas\n      const cardWidthStats = 55;\n      const cardHeightStats = 35;\n      const startX = (pageWidth - (cardWidthStats * 3 + 20)) / 2;\n\n      // Tarjeta Total\n      pdf.setFillColor(255, 255, 255);\n      pdf.setDrawColor(230, 230, 230);\n      pdf.setLineWidth(0.5);\n      pdf.roundedRect(startX, 50, cardWidthStats, cardHeightStats, 8, 8, 'FD');\n      pdf.setTextColor(102, 126, 234);\n      pdf.setFontSize(18);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text(estadisticas.total_votos.toString(), startX + cardWidthStats / 2, 65, {\n        align: 'center'\n      });\n      pdf.setFontSize(10);\n      pdf.setTextColor(102, 102, 102);\n      pdf.setFont('helvetica', 'normal');\n      pdf.text('Total Votos', startX + cardWidthStats / 2, 75, {\n        align: 'center'\n      });\n\n      // Tarjeta Niño\n      pdf.setFillColor(255, 255, 255);\n      pdf.roundedRect(startX + cardWidthStats + 10, 50, cardWidthStats, cardHeightStats, 8, 8, 'FD');\n      pdf.setTextColor(30, 64, 175);\n      pdf.setFontSize(18);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text(estadisticas.votos_varon.toString(), startX + cardWidthStats + 10 + cardWidthStats / 2, 65, {\n        align: 'center'\n      });\n      pdf.setFontSize(10);\n      pdf.setTextColor(102, 102, 102);\n      pdf.setFont('helvetica', 'normal');\n      pdf.text('Nino', startX + cardWidthStats + 10 + cardWidthStats / 2, 75, {\n        align: 'center'\n      });\n\n      // Tarjeta Niña\n      pdf.setFillColor(255, 255, 255);\n      pdf.roundedRect(startX + (cardWidthStats + 10) * 2, 50, cardWidthStats, cardHeightStats, 8, 8, 'FD');\n      pdf.setTextColor(190, 24, 93);\n      pdf.setFontSize(18);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text(estadisticas.votos_nina.toString(), startX + (cardWidthStats + 10) * 2 + cardWidthStats / 2, 65, {\n        align: 'center'\n      });\n      pdf.setFontSize(10);\n      pdf.setTextColor(102, 102, 102);\n      pdf.setFont('helvetica', 'normal');\n      pdf.text('Nina', startX + (cardWidthStats + 10) * 2 + cardWidthStats / 2, 75, {\n        align: 'center'\n      });\n\n      // Porcentajes en círculos pequeños\n      pdf.setFontSize(12);\n      const porcentajeNino = Math.round(estadisticas.votos_varon / estadisticas.total_votos * 100);\n      const porcentajeNina = Math.round(estadisticas.votos_nina / estadisticas.total_votos * 100);\n\n      // Círculo para niño\n      pdf.setFillColor(212, 240, 247); // Celeste suave\n      pdf.circle(startX + cardWidthStats + 10 + cardWidthStats / 2, 90, 8, 'F');\n      pdf.setTextColor(30, 64, 175);\n      pdf.setFontSize(10);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text(`${porcentajeNino}%`, startX + cardWidthStats + 10 + cardWidthStats / 2, 93, {\n        align: 'center'\n      });\n\n      // Círculo para niña\n      pdf.setFillColor(250, 218, 221); // Rosa suave\n      pdf.circle(startX + (cardWidthStats + 10) * 2 + cardWidthStats / 2, 90, 8, 'F');\n      pdf.setTextColor(190, 24, 93);\n      pdf.text(`${porcentajeNina}%`, startX + (cardWidthStats + 10) * 2 + cardWidthStats / 2, 93, {\n        align: 'center'\n      });\n\n      // Filtrar comentarios válidos\n      const comentariosValidos = votos.filter(voto => voto.comentario && voto.comentario.trim().length > 0 && voto.comentario.trim() !== 'undefined' && voto.comentario.trim() !== 'null');\n      if (comentariosValidos.length > 0) {\n        // Página 3+: Comentarios en rejilla de 3 columnas\n        pdf.addPage();\n        pdf.setFillColor(248, 250, 252);\n        pdf.rect(0, 0, pageWidth, pageHeight, 'F');\n\n        // Título de la página\n        pdf.setFontSize(20);\n        pdf.setTextColor(51, 51, 51);\n        pdf.setFont('helvetica', 'bold');\n        pdf.text('Mensajes Especiales', pageWidth / 2, 25, {\n          align: 'center'\n        });\n\n        // Configuración de la rejilla\n        const marginX = 15;\n        const marginY = 40;\n        const cardWidth = (pageWidth - marginX * 2 - 20) / 3; // 3 columnas con espacio entre ellas\n        const cardHeight = 75; // altura mayor para contenido\n        const cardSpacing = 10;\n        let currentRow = 0;\n        let currentCol = 0;\n        let pageCount = 3;\n\n        // Cache de banderas para evitar múltiples descargas\n        const flagCache = new Map();\n        for (let index = 0; index < comentariosValidos.length; index++) {\n          var _voto$nombre;\n          const voto = comentariosValidos[index];\n\n          // Verificar si necesitamos nueva página\n          const currentY = marginY + currentRow * (cardHeight + cardSpacing);\n          if (currentY + cardHeight > pageHeight - 30) {\n            pdf.addPage();\n            pdf.setFillColor(248, 250, 252);\n            pdf.rect(0, 0, pageWidth, pageHeight, 'F');\n            pdf.setFontSize(20);\n            pdf.setTextColor(51, 51, 51);\n            pdf.setFont('helvetica', 'bold');\n            pdf.text(`Mensajes Especiales (Pagina ${pageCount})`, pageWidth / 2, 25, {\n              align: 'center'\n            });\n            currentRow = 0;\n            currentCol = 0;\n            pageCount++;\n          }\n          const cardX = marginX + currentCol * (cardWidth + 10);\n          const cardY = marginY + currentRow * (cardHeight + cardSpacing);\n\n          // Dibujar card con estilo moderno\n          pdf.setFillColor(255, 255, 255);\n          pdf.setDrawColor(230, 230, 230);\n          pdf.setLineWidth(0.5);\n          pdf.roundedRect(cardX, cardY, cardWidth, cardHeight, 8, 8, 'FD');\n\n          // Agregar sombra sutil (simulada con borde más oscuro)\n          pdf.setDrawColor(200, 200, 200);\n          pdf.setLineWidth(0.3);\n          pdf.roundedRect(cardX + 1, cardY + 1, cardWidth, cardHeight, 8, 8, 'S');\n\n          // Bandera como imagen (FlagCDN) si hay país\n          const pais = (voto.pais || '').toString().toLowerCase();\n          let nombreOffsetX = 8;\n          if (pais && pais.length === 2) {\n            try {\n              const flagUrl = `https://flagcdn.com/24x18/${pais}.png`;\n              const flagImg = await loadImage(flagUrl);\n              pdf.addImage(flagImg, 'PNG', cardX + 8, cardY + 6, 12, 9);\n              nombreOffsetX = 8 + 12 + 4; // desplazar el nombre después de la bandera\n            } catch (e) {\n              // Ignorar si falla la bandera\n            }\n          }\n\n          // Limpiar y validar el nombre\n          let nombreLimpio = ((_voto$nombre = voto.nombre) === null || _voto$nombre === void 0 ? void 0 : _voto$nombre.toString().trim()) || 'Anonimo';\n          if (nombreLimpio === 'undefined' || nombreLimpio === 'null') nombreLimpio = 'Anonimo';\n\n          // Nombre\n          pdf.setFontSize(11);\n          pdf.setTextColor(51, 51, 51);\n          pdf.setFont('helvetica', 'bold');\n          pdf.text(nombreLimpio, cardX + nombreOffsetX, cardY + 12);\n\n          // Etiqueta de género\n          pdf.setFontSize(9);\n          pdf.setFont('helvetica', 'normal');\n          if (voto.prediccion === 'varon') {\n            pdf.setFillColor(212, 240, 247);\n            pdf.roundedRect(cardX + 8, cardY + 20, 28, 8, 4, 4, 'F');\n            pdf.setTextColor(30, 64, 175);\n            pdf.text('Nino', cardX + 12, cardY + 25);\n          } else {\n            pdf.setFillColor(250, 218, 221);\n            pdf.roundedRect(cardX + 8, cardY + 20, 28, 8, 4, 4, 'F');\n            pdf.setTextColor(190, 24, 93);\n            pdf.text('Nina', cardX + 12, cardY + 25);\n          }\n\n          // Comentario centrado\n          let comentarioLimpio = voto.comentario || 'Sin comentario';\n          comentarioLimpio = comentarioLimpio.toString().trim();\n          if (comentarioLimpio === 'undefined' || comentarioLimpio === 'null') comentarioLimpio = 'Sin comentario';\n          pdf.setFontSize(9);\n          pdf.setTextColor(55, 65, 81);\n          pdf.setFont('helvetica', 'normal');\n          const comentario = `\"${comentarioLimpio}\"`;\n          const lines = pdf.splitTextToSize(comentario, cardWidth - 20);\n          const textHeight = lines.length * 4;\n          const startTextY = cardY + 36 + Math.max(0, (cardHeight - 36 - textHeight - 12) / 2);\n          lines.forEach((line, lineIndex) => {\n            pdf.text(line, cardX + cardWidth / 2, startTextY + lineIndex * 4, {\n              align: 'center'\n            });\n          });\n\n          // Fecha inferior (usar fecha_voto)\n          pdf.setFontSize(8);\n          pdf.setTextColor(156, 163, 175);\n          let fechaTexto = 'Fecha no disponible';\n          try {\n            const raw = (voto.fecha_voto || voto.fecha || '').toString();\n            if (raw) {\n              const f = new Date(raw);\n              if (!isNaN(f.getTime())) {\n                const fechaVoto = f.toLocaleDateString('es-ES', {\n                  day: '2-digit',\n                  month: 'short',\n                  year: 'numeric'\n                });\n                const horaVoto = f.toLocaleTimeString('es-ES', {\n                  hour: '2-digit',\n                  minute: '2-digit'\n                });\n                fechaTexto = `${fechaVoto}, ${horaVoto}`;\n              }\n            }\n          } catch {}\n          pdf.text(fechaTexto, cardX + 8, cardY + cardHeight - 6);\n\n          // Foto circular (si existe)\n          if (voto.foto_url) {\n            try {\n              const size = 20;\n              const dataUrl = await createCircularImageDataUrl(`http://192.168.18.49:5000${voto.foto_url}`, size * 2);\n              const fotoX = cardX + cardWidth - size - 6;\n              const fotoY = cardY + 6;\n              pdf.addImage(dataUrl, 'PNG', fotoX, fotoY, size, size);\n              // Borde circular\n              pdf.setDrawColor(230, 230, 230);\n              pdf.setLineWidth(0.5);\n              pdf.circle(fotoX + size / 2, fotoY + size / 2, size / 2, 'S');\n            } catch {\n              // Placeholder\n              pdf.setFillColor(229, 231, 235);\n              pdf.circle(cardX + cardWidth - 16, cardY + 16, 10, 'F');\n            }\n          }\n\n          // Avanzar a la siguiente posición en la rejilla\n          currentCol++;\n          if (currentCol >= 3) {\n            currentCol = 0;\n            currentRow++;\n          }\n        }\n      }\n\n      // Página final: Mensaje especial destacado\n      pdf.addPage();\n      pdf.setFillColor(248, 250, 252);\n      pdf.rect(0, 0, pageWidth, pageHeight, 'F');\n\n      // Título principal\n      pdf.setFontSize(24);\n      pdf.setTextColor(51, 51, 51);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text('¡Felicidades Futuros Padres!', pageWidth / 2, 50, {\n        align: 'center'\n      });\n\n      // Card destacada para el mensaje final\n      const finalCardWidth = pageWidth - 40;\n      const finalCardHeight = 120;\n      const finalCardX = 20;\n      const finalCardY = 70;\n\n      // Fondo de la card\n      pdf.setFillColor(255, 255, 255);\n      pdf.setDrawColor(230, 230, 230);\n      pdf.setLineWidth(1);\n      pdf.roundedRect(finalCardX, finalCardY, finalCardWidth, finalCardHeight, 12, 12, 'FD');\n\n      // Borde decorativo\n      pdf.setDrawColor(102, 126, 234);\n      pdf.setLineWidth(2);\n      pdf.roundedRect(finalCardX, finalCardY, finalCardWidth, finalCardHeight, 12, 12, 'S');\n\n      // Mensaje final\n      pdf.setFontSize(14);\n      pdf.setTextColor(51, 51, 51);\n      pdf.setFont('helvetica', 'normal');\n      const mensajeFinal = ['Este arbol representa el amor y las buenas vibras que', 'toda su familia y amigos tienen para ustedes.', '', 'Cada hoja es una prediccion llena de carino y', 'esperanza para el nuevo miembro de la familia.', '', '¡Que este bebe traiga mucha alegria y bendiciones', 'a sus vidas!'];\n      mensajeFinal.forEach((line, index) => {\n        if (line.trim() !== '') {\n          pdf.text(line, pageWidth / 2, finalCardY + 25 + index * 12, {\n            align: 'center'\n          });\n        }\n      });\n\n      // Firma\n      pdf.setFontSize(12);\n      pdf.setTextColor(102, 126, 234);\n      pdf.setFont('helvetica', 'italic');\n      pdf.text('Con mucho amor y buenos deseos', pageWidth / 2, finalCardY + finalCardHeight + 20, {\n        align: 'center'\n      });\n\n      // Guardar el PDF\n      pdf.save('arbol-predicciones-recuerdo-especial.pdf');\n    } catch (error) {\n      console.error('Error generando PDF:', error);\n      alert('Error al generar el PDF. Inténtalo de nuevo.');\n    } finally {\n      setGenering(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(motion.button, {\n    onClick: generatePDF,\n    disabled: generating,\n    whileHover: {\n      scale: 1.05\n    },\n    whileTap: {\n      scale: 0.95\n    },\n    style: {\n      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n      color: 'white',\n      border: 'none',\n      borderRadius: '15px',\n      padding: '18px 30px',\n      fontSize: '1.1rem',\n      fontWeight: '600',\n      cursor: generating ? 'not-allowed' : 'pointer',\n      width: '100%',\n      marginTop: '20px',\n      boxShadow: '0 4px 15px rgba(102, 126, 234, 0.4)',\n      transition: 'all 0.3s ease',\n      opacity: generating ? 0.7 : 1\n    },\n    children: generating ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        gap: '10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '20px',\n          height: '20px',\n          border: '2px solid rgba(255,255,255,0.3)',\n          borderTop: '2px solid white',\n          borderRadius: '50%',\n          animation: 'spin 1s linear infinite'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 11\n      }, this), \"Generando recuerdo especial...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        gap: '10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          fontSize: '1.3rem'\n        },\n        children: \"\\uD83D\\uDCC4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Crear Recuerdo Especial\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 407,\n    columnNumber: 5\n  }, this);\n};\n_s(PDFGenerator, \"IZKZ4/5R9/VdhuI5+k+Ba4l0lxQ=\");\n_c = PDFGenerator;\nexport default PDFGenerator;\nvar _c;\n$RefreshReg$(_c, \"PDFGenerator\");","map":{"version":3,"names":["React","jsPDF","html2canvas","motion","jsxDEV","_jsxDEV","PDFGenerator","votos","estadisticas","treeRef","_s","generating","setGenering","useState","loadImage","src","Promise","resolve","reject","img","Image","crossOrigin","onload","onerror","createCircularImageDataUrl","size","canvas","document","createElement","ctx","getContext","width","height","clearRect","save","beginPath","arc","Math","PI","closePath","clip","drawImage","restore","toDataURL","generatePDF","current","pdf","pageWidth","internal","pageSize","getWidth","pageHeight","getHeight","setFont","setFillColor","rect","setFontSize","setTextColor","text","align","treeCanvas","scale","useCORS","allowTaint","backgroundColor","logging","offsetWidth","offsetHeight","treeImgData","treeAspectRatio","treeWidth","treeHeight","addImage","fecha","Date","toLocaleDateString","year","month","day","addPage","cardWidthStats","cardHeightStats","startX","setDrawColor","setLineWidth","roundedRect","total_votos","toString","votos_varon","votos_nina","porcentajeNino","round","porcentajeNina","circle","comentariosValidos","filter","voto","comentario","trim","length","marginX","marginY","cardWidth","cardHeight","cardSpacing","currentRow","currentCol","pageCount","flagCache","Map","index","_voto$nombre","currentY","cardX","cardY","pais","toLowerCase","nombreOffsetX","flagUrl","flagImg","e","nombreLimpio","nombre","prediccion","comentarioLimpio","lines","splitTextToSize","textHeight","startTextY","max","forEach","line","lineIndex","fechaTexto","raw","fecha_voto","f","isNaN","getTime","fechaVoto","horaVoto","toLocaleTimeString","hour","minute","foto_url","dataUrl","fotoX","fotoY","finalCardWidth","finalCardHeight","finalCardX","finalCardY","mensajeFinal","error","console","alert","button","onClick","disabled","whileHover","whileTap","style","background","color","border","borderRadius","padding","fontSize","fontWeight","cursor","marginTop","boxShadow","transition","opacity","children","display","alignItems","justifyContent","gap","borderTop","animation","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/devdisnovo/Documentos/PROYECTOS/merci/client/src/components/PDFGenerator.tsx"],"sourcesContent":["import React, { useRef } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport { motion } from 'framer-motion';\n\ninterface PDFGeneratorProps {\n  votos: any[];\n  estadisticas: any;\n  treeRef: React.RefObject<HTMLDivElement>;\n}\n\nconst PDFGenerator: React.FC<PDFGeneratorProps> = ({ votos, estadisticas, treeRef }) => {\n  const [generating, setGenering] = React.useState(false);\n\n  // Utilidad: carga una imagen y devuelve el elemento HTMLImageElement\n  const loadImage = (src: string): Promise<HTMLImageElement> => {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.crossOrigin = 'anonymous';\n      img.onload = () => resolve(img);\n      img.onerror = reject;\n      img.src = src;\n    });\n  };\n\n  // Utilidad: crea una imagen circular a partir de una fuente\n  const createCircularImageDataUrl = async (src: string, size: number): Promise<string> => {\n    const img = await loadImage(src);\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    canvas.width = size;\n    canvas.height = size;\n\n    if (!ctx) return '';\n\n    ctx.clearRect(0, 0, size, size);\n    ctx.save();\n    ctx.beginPath();\n    ctx.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.clip();\n\n    // Dibujar imagen ajustada al cuadrado\n    ctx.drawImage(img, 0, 0, size, size);\n    ctx.restore();\n\n    return canvas.toDataURL('image/png');\n  };\n\n  const generatePDF = async () => {\n    if (!treeRef.current) return;\n    \n    setGenering(true);\n    \n    try {\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const pageWidth = pdf.internal.pageSize.getWidth();\n      const pageHeight = pdf.internal.pageSize.getHeight();\n      \n      // Configurar fuentes modernas\n      pdf.setFont('helvetica');\n      \n      // Página 1: Portada con encabezado\n      pdf.setFillColor(248, 250, 252); // Fondo lavanda muy claro\n      pdf.rect(0, 0, pageWidth, pageHeight, 'F');\n      \n      // Encabezado principal\n      pdf.setFontSize(24);\n      pdf.setTextColor(51, 51, 51);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text('Arbol de Predicciones - Un Recuerdo Especial', pageWidth / 2, 30, { align: 'center' });\n      \n      // Capturar imagen del árbol\n      const treeCanvas = await html2canvas(treeRef.current, {\n        scale: 1.5,\n        useCORS: true,\n        allowTaint: true,\n        backgroundColor: '#ffffff',\n        logging: false,\n        width: treeRef.current.offsetWidth,\n        height: treeRef.current.offsetHeight\n      });\n      \n      const treeImgData = treeCanvas.toDataURL('image/png');\n      const treeAspectRatio = treeCanvas.width / treeCanvas.height;\n      const treeWidth = pageWidth - 40;\n      const treeHeight = treeWidth / treeAspectRatio;\n      \n      // Agregar imagen del árbol centrada\n      pdf.addImage(treeImgData, 'PNG', 20, 50, treeWidth, treeHeight);\n      \n      // Fecha de generación\n      pdf.setFontSize(12);\n      pdf.setTextColor(153, 153, 153);\n      pdf.setFont('helvetica', 'normal');\n      const fecha = new Date().toLocaleDateString('es-ES', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n      pdf.text(`Generado el ${fecha}`, pageWidth / 2, pageHeight - 20, { align: 'center' });\n      \n      // Página 2: Estadísticas en tarjetas modernas\n      pdf.addPage();\n      pdf.setFillColor(248, 250, 252);\n      pdf.rect(0, 0, pageWidth, pageHeight, 'F');\n      \n      // Título de estadísticas\n      pdf.setFontSize(20);\n      pdf.setTextColor(51, 51, 51);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text('Estadisticas de las Predicciones', pageWidth / 2, 30, { align: 'center' });\n      \n      // Dibujar tarjetas de estadísticas modernas\n      const cardWidthStats = 55;\n      const cardHeightStats = 35;\n      const startX = (pageWidth - (cardWidthStats * 3 + 20)) / 2;\n      \n      // Tarjeta Total\n      pdf.setFillColor(255, 255, 255);\n      pdf.setDrawColor(230, 230, 230);\n      pdf.setLineWidth(0.5);\n      pdf.roundedRect(startX, 50, cardWidthStats, cardHeightStats, 8, 8, 'FD');\n      pdf.setTextColor(102, 126, 234);\n      pdf.setFontSize(18);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text(estadisticas.total_votos.toString(), startX + cardWidthStats/2, 65, { align: 'center' });\n      pdf.setFontSize(10);\n      pdf.setTextColor(102, 102, 102);\n      pdf.setFont('helvetica', 'normal');\n      pdf.text('Total Votos', startX + cardWidthStats/2, 75, { align: 'center' });\n      \n      // Tarjeta Niño\n      pdf.setFillColor(255, 255, 255);\n      pdf.roundedRect(startX + cardWidthStats + 10, 50, cardWidthStats, cardHeightStats, 8, 8, 'FD');\n      pdf.setTextColor(30, 64, 175);\n      pdf.setFontSize(18);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text(estadisticas.votos_varon.toString(), startX + cardWidthStats + 10 + cardWidthStats/2, 65, { align: 'center' });\n      pdf.setFontSize(10);\n      pdf.setTextColor(102, 102, 102);\n      pdf.setFont('helvetica', 'normal');\n      pdf.text('Nino', startX + cardWidthStats + 10 + cardWidthStats/2, 75, { align: 'center' });\n      \n      // Tarjeta Niña\n      pdf.setFillColor(255, 255, 255);\n      pdf.roundedRect(startX + (cardWidthStats + 10) * 2, 50, cardWidthStats, cardHeightStats, 8, 8, 'FD');\n      pdf.setTextColor(190, 24, 93);\n      pdf.setFontSize(18);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text(estadisticas.votos_nina.toString(), startX + (cardWidthStats + 10) * 2 + cardWidthStats/2, 65, { align: 'center' });\n      pdf.setFontSize(10);\n      pdf.setTextColor(102, 102, 102);\n      pdf.setFont('helvetica', 'normal');\n      pdf.text('Nina', startX + (cardWidthStats + 10) * 2 + cardWidthStats/2, 75, { align: 'center' });\n      \n      // Porcentajes en círculos pequeños\n      pdf.setFontSize(12);\n      const porcentajeNino = Math.round((estadisticas.votos_varon / estadisticas.total_votos) * 100);\n      const porcentajeNina = Math.round((estadisticas.votos_nina / estadisticas.total_votos) * 100);\n      \n      // Círculo para niño\n      pdf.setFillColor(212, 240, 247); // Celeste suave\n      pdf.circle(startX + cardWidthStats + 10 + cardWidthStats/2, 90, 8, 'F');\n      pdf.setTextColor(30, 64, 175);\n      pdf.setFontSize(10);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text(`${porcentajeNino}%`, startX + cardWidthStats + 10 + cardWidthStats/2, 93, { align: 'center' });\n      \n      // Círculo para niña\n      pdf.setFillColor(250, 218, 221); // Rosa suave\n      pdf.circle(startX + (cardWidthStats + 10) * 2 + cardWidthStats/2, 90, 8, 'F');\n      pdf.setTextColor(190, 24, 93);\n      pdf.text(`${porcentajeNina}%`, startX + (cardWidthStats + 10) * 2 + cardWidthStats/2, 93, { align: 'center' });\n      \n      // Filtrar comentarios válidos\n      const comentariosValidos = votos.filter(voto => \n        voto.comentario && \n        voto.comentario.trim().length > 0 && \n        voto.comentario.trim() !== 'undefined' &&\n        voto.comentario.trim() !== 'null'\n      );\n      \n      if (comentariosValidos.length > 0) {\n        // Página 3+: Comentarios en rejilla de 3 columnas\n        pdf.addPage();\n        pdf.setFillColor(248, 250, 252);\n        pdf.rect(0, 0, pageWidth, pageHeight, 'F');\n        \n        // Título de la página\n        pdf.setFontSize(20);\n        pdf.setTextColor(51, 51, 51);\n        pdf.setFont('helvetica', 'bold');\n        pdf.text('Mensajes Especiales', pageWidth / 2, 25, { align: 'center' });\n        \n        // Configuración de la rejilla\n        const marginX = 15;\n        const marginY = 40;\n        const cardWidth = (pageWidth - (marginX * 2) - 20) / 3; // 3 columnas con espacio entre ellas\n        const cardHeight = 75; // altura mayor para contenido\n        const cardSpacing = 10;\n        \n        let currentRow = 0;\n        let currentCol = 0;\n        let pageCount = 3;\n        \n        // Cache de banderas para evitar múltiples descargas\n        const flagCache = new Map<string, HTMLImageElement>();\n        \n        for (let index = 0; index < comentariosValidos.length; index++) {\n          const voto = comentariosValidos[index];\n          \n          // Verificar si necesitamos nueva página\n          const currentY = marginY + (currentRow * (cardHeight + cardSpacing));\n          if (currentY + cardHeight > pageHeight - 30) {\n            pdf.addPage();\n            pdf.setFillColor(248, 250, 252);\n            pdf.rect(0, 0, pageWidth, pageHeight, 'F');\n            pdf.setFontSize(20);\n            pdf.setTextColor(51, 51, 51);\n            pdf.setFont('helvetica', 'bold');\n            pdf.text(`Mensajes Especiales (Pagina ${pageCount})`, pageWidth / 2, 25, { align: 'center' });\n            currentRow = 0;\n            currentCol = 0;\n            pageCount++;\n          }\n          \n          const cardX = marginX + (currentCol * (cardWidth + 10));\n          const cardY = marginY + (currentRow * (cardHeight + cardSpacing));\n          \n          // Dibujar card con estilo moderno\n          pdf.setFillColor(255, 255, 255);\n          pdf.setDrawColor(230, 230, 230);\n          pdf.setLineWidth(0.5);\n          pdf.roundedRect(cardX, cardY, cardWidth, cardHeight, 8, 8, 'FD');\n          \n          // Agregar sombra sutil (simulada con borde más oscuro)\n          pdf.setDrawColor(200, 200, 200);\n          pdf.setLineWidth(0.3);\n          pdf.roundedRect(cardX + 1, cardY + 1, cardWidth, cardHeight, 8, 8, 'S');\n          \n          // Bandera como imagen (FlagCDN) si hay país\n          const pais = (voto.pais || '').toString().toLowerCase();\n          let nombreOffsetX = 8;\n          if (pais && pais.length === 2) {\n            try {\n              const flagUrl = `https://flagcdn.com/24x18/${pais}.png`;\n              const flagImg = await loadImage(flagUrl);\n              pdf.addImage(flagImg, 'PNG', cardX + 8, cardY + 6, 12, 9);\n              nombreOffsetX = 8 + 12 + 4; // desplazar el nombre después de la bandera\n            } catch (e) {\n              // Ignorar si falla la bandera\n            }\n          }\n          \n          // Limpiar y validar el nombre\n          let nombreLimpio = voto.nombre?.toString().trim() || 'Anonimo';\n          if (nombreLimpio === 'undefined' || nombreLimpio === 'null') nombreLimpio = 'Anonimo';\n          \n          // Nombre\n          pdf.setFontSize(11);\n          pdf.setTextColor(51, 51, 51);\n          pdf.setFont('helvetica', 'bold');\n          pdf.text(nombreLimpio, cardX + nombreOffsetX, cardY + 12);\n          \n          // Etiqueta de género\n          pdf.setFontSize(9);\n          pdf.setFont('helvetica', 'normal');\n          if (voto.prediccion === 'varon') {\n            pdf.setFillColor(212, 240, 247);\n            pdf.roundedRect(cardX + 8, cardY + 20, 28, 8, 4, 4, 'F');\n            pdf.setTextColor(30, 64, 175);\n            pdf.text('Nino', cardX + 12, cardY + 25);\n          } else {\n            pdf.setFillColor(250, 218, 221);\n            pdf.roundedRect(cardX + 8, cardY + 20, 28, 8, 4, 4, 'F');\n            pdf.setTextColor(190, 24, 93);\n            pdf.text('Nina', cardX + 12, cardY + 25);\n          }\n          \n          // Comentario centrado\n          let comentarioLimpio = voto.comentario || 'Sin comentario';\n          comentarioLimpio = comentarioLimpio.toString().trim();\n          if (comentarioLimpio === 'undefined' || comentarioLimpio === 'null') comentarioLimpio = 'Sin comentario';\n          pdf.setFontSize(9);\n          pdf.setTextColor(55, 65, 81);\n          pdf.setFont('helvetica', 'normal');\n          const comentario = `\"${comentarioLimpio}\"`;\n          const lines = pdf.splitTextToSize(comentario, cardWidth - 20);\n          const textHeight = lines.length * 4;\n          const startTextY = cardY + 36 + Math.max(0, (cardHeight - 36 - textHeight - 12) / 2);\n          lines.forEach((line: string, lineIndex: number) => {\n            pdf.text(line, cardX + cardWidth / 2, startTextY + (lineIndex * 4), { align: 'center' });\n          });\n          \n          // Fecha inferior (usar fecha_voto)\n          pdf.setFontSize(8);\n          pdf.setTextColor(156, 163, 175);\n          let fechaTexto = 'Fecha no disponible';\n          try {\n            const raw = (voto.fecha_voto || voto.fecha || '').toString();\n            if (raw) {\n              const f = new Date(raw);\n              if (!isNaN(f.getTime())) {\n                const fechaVoto = f.toLocaleDateString('es-ES', { day: '2-digit', month: 'short', year: 'numeric' });\n                const horaVoto = f.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });\n                fechaTexto = `${fechaVoto}, ${horaVoto}`;\n              }\n            }\n          } catch {}\n          pdf.text(fechaTexto, cardX + 8, cardY + cardHeight - 6);\n          \n          // Foto circular (si existe)\n          if (voto.foto_url) {\n            try {\n              const size = 20;\n              const dataUrl = await createCircularImageDataUrl(`http://192.168.18.49:5000${voto.foto_url}`, size * 2);\n              const fotoX = cardX + cardWidth - size - 6;\n              const fotoY = cardY + 6;\n              pdf.addImage(dataUrl, 'PNG', fotoX, fotoY, size, size);\n              // Borde circular\n              pdf.setDrawColor(230, 230, 230);\n              pdf.setLineWidth(0.5);\n              pdf.circle(fotoX + size/2, fotoY + size/2, size/2, 'S');\n            } catch {\n              // Placeholder\n              pdf.setFillColor(229, 231, 235);\n              pdf.circle(cardX + cardWidth - 16, cardY + 16, 10, 'F');\n            }\n          }\n          \n          // Avanzar a la siguiente posición en la rejilla\n          currentCol++;\n          if (currentCol >= 3) {\n            currentCol = 0;\n            currentRow++;\n          }\n        }\n      }\n      \n      // Página final: Mensaje especial destacado\n      pdf.addPage();\n      pdf.setFillColor(248, 250, 252);\n      pdf.rect(0, 0, pageWidth, pageHeight, 'F');\n      \n      // Título principal\n      pdf.setFontSize(24);\n      pdf.setTextColor(51, 51, 51);\n      pdf.setFont('helvetica', 'bold');\n      pdf.text('¡Felicidades Futuros Padres!', pageWidth / 2, 50, { align: 'center' });\n      \n      // Card destacada para el mensaje final\n      const finalCardWidth = pageWidth - 40;\n      const finalCardHeight = 120;\n      const finalCardX = 20;\n      const finalCardY = 70;\n      \n      // Fondo de la card\n      pdf.setFillColor(255, 255, 255);\n      pdf.setDrawColor(230, 230, 230);\n      pdf.setLineWidth(1);\n      pdf.roundedRect(finalCardX, finalCardY, finalCardWidth, finalCardHeight, 12, 12, 'FD');\n      \n      // Borde decorativo\n      pdf.setDrawColor(102, 126, 234);\n      pdf.setLineWidth(2);\n      pdf.roundedRect(finalCardX, finalCardY, finalCardWidth, finalCardHeight, 12, 12, 'S');\n      \n      // Mensaje final\n      pdf.setFontSize(14);\n      pdf.setTextColor(51, 51, 51);\n      pdf.setFont('helvetica', 'normal');\n      const mensajeFinal = [\n        'Este arbol representa el amor y las buenas vibras que',\n        'toda su familia y amigos tienen para ustedes.',\n        '',\n        'Cada hoja es una prediccion llena de carino y',\n        'esperanza para el nuevo miembro de la familia.',\n        '',\n        '¡Que este bebe traiga mucha alegria y bendiciones',\n        'a sus vidas!'\n      ];\n      mensajeFinal.forEach((line, index) => {\n        if (line.trim() !== '') {\n          pdf.text(line, pageWidth / 2, finalCardY + 25 + (index * 12), { align: 'center' });\n        }\n      });\n      \n      // Firma\n      pdf.setFontSize(12);\n      pdf.setTextColor(102, 126, 234);\n      pdf.setFont('helvetica', 'italic');\n      pdf.text('Con mucho amor y buenos deseos', pageWidth / 2, finalCardY + finalCardHeight + 20, { align: 'center' });\n      \n      // Guardar el PDF\n      pdf.save('arbol-predicciones-recuerdo-especial.pdf');\n      \n    } catch (error) {\n      console.error('Error generando PDF:', error);\n      alert('Error al generar el PDF. Inténtalo de nuevo.');\n    } finally {\n      setGenering(false);\n    }\n  };\n\n  return (\n    <motion.button\n      onClick={generatePDF}\n      disabled={generating}\n      whileHover={{ scale: 1.05 }}\n      whileTap={{ scale: 0.95 }}\n      style={{\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n        color: 'white',\n        border: 'none',\n        borderRadius: '15px',\n        padding: '18px 30px',\n        fontSize: '1.1rem',\n        fontWeight: '600',\n        cursor: generating ? 'not-allowed' : 'pointer',\n        width: '100%',\n        marginTop: '20px',\n        boxShadow: '0 4px 15px rgba(102, 126, 234, 0.4)',\n        transition: 'all 0.3s ease',\n        opacity: generating ? 0.7 : 1\n      }}\n    >\n      {generating ? (\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px' }}>\n          <div style={{ \n            width: '20px', \n            height: '20px', \n            border: '2px solid rgba(255,255,255,0.3)', \n            borderTop: '2px solid white', \n            borderRadius: '50%', \n            animation: 'spin 1s linear infinite' \n          }} />\n          Generando recuerdo especial...\n        </div>\n      ) : (\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px' }}>\n          <span style={{ fontSize: '1.3rem' }}>📄</span>\n          <span>Crear Recuerdo Especial</span>\n        </div>\n      )}\n    </motion.button>\n  );\n};\n\nexport default PDFGenerator; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}